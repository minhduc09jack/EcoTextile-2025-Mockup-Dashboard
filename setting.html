<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cài đặt</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/feather-icons"></script>
</head>

<body>
  <button class="hamburger" onclick="toggleSidebar()">
    ☰
  </button>
  <nav class="sidebar">
    <div>
      <h1>EcoTextile</h1>
      <span>Nền tảng Công nghệ Bền vững</span>
    </div>
    <div class="nav">
      <a href="index.html"><i data-feather="bar-chart-2"></i>Bảng điều khiển</a>
      <a href="inventory.html"><i data-feather="archive"></i>Kho</a>
      <a href="suppliers.html"><i data-feather="truck"></i>Nhà cung cấp</a>
      <a href="mockup-design-assistant.html"><i data-feather="cpu"></i>Trợ lý thiết kế</a>
      <a href="mockup-fabric-analysis.html"><i data-feather="layers"></i>Tối ưu vải</a>
      <a href="mockup-trend-analyzer.html"><i data-feather="trending-up"></i>Phân tích xu hướng</a>
      <a href="setting.html" class="active"><i data-feather="settings"></i>Cài đặt</a>
    </div>
  </nav>

  <main class="main">
    <header>
      <h2>Cài đặt</h2>
      <p>Quản lý hồ sơ và tùy chọn của bạn.</p>
    </header>

    <section class="panel">
      <h2><i data-feather="user"></i> Thông tin người dùng</h2>
      <label>Tên đăng nhập</label>
      <input id="username" placeholder="Nhập tên đăng nhập của bạn" style="padding:8px;width:100%;margin-bottom:10px;">

      <label>Giao diện</label>
      <select id="theme" style="padding:8px;width:100%;margin-bottom:20px;">
        <option value="light">Sáng</option>
        <option value="dark">Tối</option>
      </select>

      <button onclick="saveSettings()">Lưu</button>
    </section>
  </main>

  <script>
    feather.replace();

    // AUTH CHECK
    if (!localStorage.getItem("currentUser")) window.location.href = "login.html";

    const user = JSON.parse(localStorage.getItem("currentUser"));
    document.getElementById("username").value = user.username || "";
    document.getElementById("theme").value = user.theme || "light";
    document.getElementById("username-display").textContent = user.username;

    function saveSettings() {
      const username = document.getElementById("username").value.trim();
      const theme = document.getElementById("theme").value;
      localStorage.setItem("currentUser", JSON.stringify({ username, theme }));
      alert("Đã lưu cài đặt!");
    }
    function logout() {
      localStorage.removeItem("currentUser");
      window.location.href = "login.html";
    }
    function toggleSidebar() {
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.querySelector(".overlay");
      const body = document.body;

      sidebar.classList.toggle("active");
      overlay.classList.toggle("show");
      body.classList.toggle("sidebar-open");
    }

    function closeSidebar() {
      document.querySelector(".sidebar").classList.remove("active");
      document.querySelector(".overlay").classList.remove("show");
      document.body.classList.remove("sidebar-open");
    }
  </script>
</body>

</html>